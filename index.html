<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>BAFN 302 Toolkit â€” BAFN 302</title>
  <meta name="description" content="Financial calculators for BAFN 302 Business Finance. TVM, NPV, IRR, bond pricing, and more â€” built around the HP 10bII+.">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header class="site-header">
    <div class="logo">
      <span class="logo-icon">$</span>
      <span class="logo-text"><em>BAFN 302</em> Toolkit</span>
      <span class="course-badge">BAFN 302</span>
    </div>
    <div class="search-box">
      <span class="search-icon">&#128269;</span>
      <input type="text" id="search" placeholder="Search toolsâ€¦" autocomplete="off">
    </div>
  </header>

  <main class="container" id="dashboard-root">

    <!-- Hero â€” only shown when not filtering -->
    <div class="dashboard-hero" id="hero">
      <div class="hero-eyebrow">University of Northern Colorado Â· Business Finance</div>
      <div class="hero-title">Your <em>BAFN 302</em> Calculator Toolkit</div>
      <div class="hero-sub">Every formula you need for exams â€” built to match the HP&nbsp;10bII+ you use in class. Practice here, ace the test there.</div>
      <div class="hero-pills">
        <span class="hero-pill">ğŸ“ Time Value of Money</span>
        <span class="hero-pill">ğŸ’¸ Cash Flows &amp; IRR</span>
        <span class="hero-pill">ğŸ“Š Bond Pricing</span>
        <span class="hero-pill">ğŸ”„ Rate Conversions</span>
        <span class="hero-pill">ğŸ–© HP 10bII+ Mode</span>
      </div>
    </div>

    <!-- Tool grid (rendered by JS) -->
    <div id="dashboard"></div>

  </main>

  <footer class="site-footer">
    <p>For educational use only Â· Not financial advice Â· Built for BAFN 302 @ UNC</p>
    <p class="footer-brand">Powered &amp; maintained by <a href="https://n3xg3nstudio.com" target="_blank" rel="noopener">n3xg3nstudio.com</a></p>
  </footer>

  <script src="/js/registry.js"></script>
  <script>
    // Category metadata: icon, CSS class for color
    const CAT_META = {
      'Time Value of Money': { icon: 'ğŸ“', cls: 'cat-tvm' },
      'Cash Flows':          { icon: 'ğŸ’¸', cls: 'cat-cf'  },
      'Rates':               { icon: 'ğŸ”„', cls: 'cat-rates'},
      'Bonds':               { icon: 'ğŸ“Š', cls: 'cat-bonds'},
    };

    function renderDashboard(filter) {
      const container = document.getElementById('dashboard');
      const hero = document.getElementById('hero');
      while (container.firstChild) container.removeChild(container.firstChild);

      // Hide hero when filtering
      hero.style.display = filter ? 'none' : '';

      // Group by category
      const categories = {};
      TOOL_REGISTRY.forEach(tool => {
        if (filter) {
          const q = filter.toLowerCase();
          if (!tool.title.toLowerCase().includes(q) && !tool.description.toLowerCase().includes(q)) return;
        }
        if (!categories[tool.category]) categories[tool.category] = [];
        categories[tool.category].push(tool);
      });

      if (Object.keys(categories).length === 0) {
        const p = document.createElement('p');
        p.textContent = 'No tools match your search.';
        p.style.cssText = 'text-align:center;color:var(--text-muted);margin-top:3rem;font-size:.9rem';
        container.appendChild(p);
        return;
      }

      Object.entries(categories).forEach(([cat, tools]) => {
        const meta = CAT_META[cat] || { icon: 'ğŸ”¢', cls: '' };

        const section = document.createElement('section');
        section.className = 'category-section ' + meta.cls;

        // Section header with icon
        const header = document.createElement('div');
        header.className = 'section-header';

        const icon = document.createElement('div');
        icon.className = 'section-icon';

        const h2 = document.createElement('h2');
        h2.textContent = cat;

        header.appendChild(icon);
        header.appendChild(h2);
        section.appendChild(header);

        const grid = document.createElement('div');
        grid.className = 'tool-grid';

        tools.forEach(tool => {
          const card = document.createElement('div');
          card.className = 'tool-card ' + meta.cls;
          card.addEventListener('click', () => { window.location.href = tool.path; });

          const tag = document.createElement('div');
          tag.className = 'tool-card-tag';
          tag.textContent = cat;

          const h3 = document.createElement('h3');
          h3.textContent = tool.title;

          const p = document.createElement('p');
          p.textContent = tool.description;

          const btn = document.createElement('button');
          btn.className = 'open-btn';
          btn.textContent = 'Open Tool â†’';

          card.appendChild(tag);
          card.appendChild(h3);
          card.appendChild(p);
          card.appendChild(btn);
          grid.appendChild(card);
        });

        section.appendChild(grid);
        container.appendChild(section);
      });
    }

    renderDashboard();

    document.getElementById('search').addEventListener('input', function () {
      renderDashboard(this.value.trim());
    });
  </script>
</body>
</html>
