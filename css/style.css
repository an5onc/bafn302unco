/* ===== Google Font ===== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

/* ===== Reset & Base ===== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  /* Brand */
  --navy:#0f172a;
  --navy-mid:#1e293b;
  --navy-light:#334155;
  --accent:#3b82f6;
  --accent-hover:#2563eb;
  --accent-light:#eff6ff;
  --accent-mid:#bfdbfe;

  /* Category colors */
  --cat-tvm:#3b82f6;
  --cat-cf:#10b981;
  --cat-rates:#f59e0b;
  --cat-bonds:#8b5cf6;

  /* Surfaces */
  --bg:#f1f5f9;
  --surface:#ffffff;
  --surface-2:#f8fafc;
  --border:#e2e8f0;
  --border-strong:#cbd5e1;

  /* Text */
  --text:#0f172a;
  --text-secondary:#475569;
  --text-muted:#94a3b8;

  /* Status */
  --success:#10b981;--success-light:#ecfdf5;
  --warning:#f59e0b;--warning-light:#fffbeb;
  --danger:#ef4444;--danger-light:#fef2f2;

  /* Design tokens */
  --radius:8px;--radius-lg:12px;--radius-xl:16px;
  --shadow-sm:0 1px 2px rgba(0,0,0,.05);
  --shadow:0 1px 3px rgba(0,0,0,.08),0 1px 2px rgba(0,0,0,.04);
  --shadow-lg:0 4px 16px rgba(0,0,0,.08),0 2px 4px rgba(0,0,0,.04);
  --shadow-xl:0 8px 32px rgba(0,0,0,.1),0 2px 8px rgba(0,0,0,.06);
  --font:'Inter',system-ui,-apple-system,'Segoe UI',sans-serif;
  --mono:'SF Mono',SFMono-Regular,Consolas,'Liberation Mono',Menlo,monospace;
}
html{font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
body{font-family:var(--font);color:var(--text);background:var(--bg);line-height:1.5;min-height:100vh}
a{color:var(--accent);text-decoration:none}
a:hover{text-decoration:underline}

/* ===== Header ===== */
.site-header{
  background:var(--navy);
  padding:.85rem 1.5rem;
  display:flex;align-items:center;gap:1rem;
  position:sticky;top:0;z-index:100;
  box-shadow:0 2px 12px rgba(0,0,0,.25);
}
.site-header .logo{
  font-size:1.05rem;font-weight:800;color:#fff;
  white-space:nowrap;letter-spacing:-.01em;
  display:flex;align-items:center;gap:.5rem;
}
.site-header .logo .logo-icon{
  width:28px;height:28px;border-radius:7px;
  background:linear-gradient(135deg,var(--accent),#6366f1);
  display:inline-flex;align-items:center;justify-content:center;
  font-size:.85rem;font-weight:800;color:#fff;
  box-shadow:0 2px 6px rgba(59,130,246,.4);
  flex-shrink:0;
}
.site-header .logo .logo-text em{color:var(--accent-mid);font-style:normal}
.site-header .logo .course-badge{
  font-size:.65rem;font-weight:600;
  background:rgba(255,255,255,.1);color:rgba(255,255,255,.65);
  padding:.2rem .5rem;border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  letter-spacing:.03em;
}
.site-header .search-box{
  flex:1;max-width:380px;margin-left:auto;position:relative;
}
.site-header .search-box input{
  width:100%;padding:.5rem .75rem .5rem 2.25rem;
  border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);
  font-size:.875rem;font-family:var(--font);
  background:rgba(255,255,255,.08);color:#fff;
  transition:border-color .2s,background .2s;
}
.site-header .search-box input::placeholder{color:rgba(255,255,255,.35)}
.site-header .search-box input:focus{
  outline:none;border-color:rgba(255,255,255,.3);
  background:rgba(255,255,255,.12);
}
.site-header .search-box .search-icon{
  position:absolute;left:.65rem;top:50%;transform:translateY(-50%);
  color:rgba(255,255,255,.4);font-size:.875rem;pointer-events:none;
}

/* ===== Container ===== */
.container{max-width:1080px;margin:0 auto;padding:2rem 1.5rem}

/* ===== Dashboard Hero ===== */
.dashboard-hero{
  background:linear-gradient(135deg,var(--navy) 0%,var(--navy-mid) 60%,#1a2744 100%);
  border-radius:var(--radius-xl);
  padding:2rem 2rem 1.75rem;
  margin-bottom:2.5rem;
  position:relative;overflow:hidden;
  box-shadow:var(--shadow-xl);
}
.dashboard-hero::before{
  content:'';position:absolute;top:-40px;right:-40px;
  width:220px;height:220px;border-radius:50%;
  background:radial-gradient(circle,rgba(59,130,246,.18) 0%,transparent 70%);
  pointer-events:none;
}
.dashboard-hero::after{
  content:'';position:absolute;bottom:-30px;left:25%;
  width:180px;height:180px;border-radius:50%;
  background:radial-gradient(circle,rgba(99,102,241,.12) 0%,transparent 70%);
  pointer-events:none;
}
.hero-eyebrow{
  font-size:.72rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;
  color:var(--accent-mid);margin-bottom:.5rem;
}
.hero-title{
  font-size:1.6rem;font-weight:800;color:#fff;
  line-height:1.25;letter-spacing:-.02em;margin-bottom:.5rem;
}
.hero-title em{color:var(--accent-mid);font-style:normal}
.hero-sub{
  font-size:.875rem;color:rgba(255,255,255,.55);
  max-width:500px;line-height:1.6;margin-bottom:1.25rem;
}
.hero-pills{display:flex;flex-wrap:wrap;gap:.5rem}
.hero-pill{
  font-size:.7rem;font-weight:600;letter-spacing:.03em;
  padding:.3rem .75rem;border-radius:999px;
  background:rgba(255,255,255,.08);color:rgba(255,255,255,.65);
  border:1px solid rgba(255,255,255,.1);
}

/* ===== Dashboard Grid ===== */
.category-section{margin-bottom:2.5rem}
.section-header{
  display:flex;align-items:center;gap:.6rem;margin-bottom:1rem;
}
.section-icon{
  width:28px;height:28px;border-radius:8px;
  display:inline-flex;align-items:center;justify-content:center;
  font-size:.9rem;flex-shrink:0;
}
.section-header h2{
  font-size:.8rem;font-weight:700;color:var(--text-secondary);
  text-transform:uppercase;letter-spacing:.07em;
}
.tool-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:1rem}

.tool-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  padding:1.25rem;
  display:flex;flex-direction:column;gap:.5rem;
  transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease;
  cursor:pointer;position:relative;overflow:hidden;
}
.tool-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:3px;
  background:var(--card-accent,var(--accent));
  opacity:0;transition:opacity .2s;
}
.tool-card:hover{
  transform:translateY(-3px);
  box-shadow:var(--shadow-xl);
  border-color:var(--border-strong);
}
.tool-card:hover::before{opacity:1}

.tool-card-icon{
  font-size:1.4rem;margin-bottom:.15rem;
}
.tool-card h3{font-size:.9375rem;font-weight:700;letter-spacing:-.01em}
.tool-card p{font-size:.8125rem;color:var(--text-secondary);flex:1;line-height:1.55}
.tool-card .open-btn{
  align-self:flex-start;margin-top:.35rem;
  padding:.375rem .875rem;border-radius:var(--radius);
  background:var(--accent-light);color:var(--accent);
  font-size:.8rem;font-weight:600;border:1px solid var(--accent-mid);
  cursor:pointer;transition:background .15s,color .15s,border-color .15s;
  font-family:var(--font);
}
.tool-card .open-btn:hover{
  background:var(--accent);color:#fff;border-color:var(--accent);
}

/* Category accent colors on cards */
.cat-tvm   { --card-accent: var(--cat-tvm) }
.cat-cf    { --card-accent: var(--cat-cf) }
.cat-rates { --card-accent: var(--cat-rates) }
.cat-bonds { --card-accent: var(--cat-bonds) }

/* Section icon backgrounds */
.cat-tvm   .section-icon { background:rgba(59,130,246,.12);color:var(--cat-tvm) }
.cat-cf    .section-icon { background:rgba(16,185,129,.12);color:var(--cat-cf) }
.cat-rates .section-icon { background:rgba(245,158,11,.12);color:var(--cat-rates) }
.cat-bonds .section-icon { background:rgba(139,92,246,.12);color:var(--cat-bonds) }

/* ===== Tool Page Layout ===== */
.tool-topbar{
  display:flex;align-items:center;gap:.75rem;flex-wrap:wrap;margin-bottom:1.5rem;
}
.tool-topbar .back-link{
  font-size:.8125rem;color:var(--text-muted);
  display:flex;align-items:center;gap:.25rem;
}
.tool-topbar .back-link:hover{color:var(--accent);text-decoration:none}
.tool-topbar h1{
  font-size:1.35rem;font-weight:800;flex:1;
  letter-spacing:-.02em;color:var(--navy);
}
.tool-topbar .btn-sm{
  padding:.375rem .75rem;border-radius:var(--radius);font-size:.8125rem;
  font-weight:500;border:1px solid var(--border);background:var(--surface);
  color:var(--text-secondary);cursor:pointer;transition:all .15s;
  font-family:var(--font);
}
.tool-topbar .btn-sm:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-light)}

/* ===== Cards ===== */
.card{
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--radius-lg);padding:1.35rem;margin-bottom:1rem;
}
.card-title{
  font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.07em;
  color:var(--text-muted);margin-bottom:1.1rem;
  display:flex;align-items:center;gap:.5rem;
}
.card-title::before{
  content:'';display:inline-block;
  width:3px;height:14px;border-radius:2px;
  background:var(--accent);flex-shrink:0;
}

/* ===== Form Inputs ===== */
.input-grid{display:grid;grid-template-columns:1fr 1fr;gap:.85rem 1.1rem}
@media(max-width:600px){.input-grid{grid-template-columns:1fr}}
.field{display:flex;flex-direction:column;gap:.3rem}
.field label{
  font-size:.8rem;font-weight:600;color:var(--text-secondary);
  display:flex;align-items:center;gap:.35rem;letter-spacing:.01em;
}
.field label .tip{
  display:inline-flex;align-items:center;justify-content:center;
  width:15px;height:15px;border-radius:50%;
  background:var(--bg);border:1px solid var(--border-strong);
  font-size:.6rem;font-weight:700;color:var(--text-muted);
  cursor:help;position:relative;
}
.field label .tip:hover::after{
  content:attr(data-tip);position:absolute;bottom:calc(100% + 6px);left:50%;
  transform:translateX(-50%);background:var(--navy);color:#fff;
  font-size:.75rem;font-weight:400;padding:.4rem .65rem;border-radius:var(--radius);
  white-space:nowrap;z-index:10;pointer-events:none;
  box-shadow:0 4px 12px rgba(0,0,0,.2);
}
.field input,.field select{
  padding:.525rem .7rem;border:1px solid var(--border);
  border-radius:var(--radius);font-size:.9rem;font-family:var(--font);
  background:var(--surface);color:var(--text);
  transition:border-color .2s,box-shadow .2s;width:100%;
}
.field input:focus,.field select:focus{
  outline:none;border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(59,130,246,.1);
}
.field input.has-error{border-color:var(--danger)}
.field .error-msg{font-size:.75rem;color:var(--danger)}
.field-full{grid-column:1/-1}

/* ===== Buttons ===== */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.4rem;
  padding:.6rem 1.35rem;border-radius:var(--radius);font-size:.875rem;
  font-weight:600;border:none;cursor:pointer;transition:all .15s;
  font-family:var(--font);letter-spacing:.01em;
}
.btn:active{transform:scale(.98)}
.btn-primary{background:var(--accent);color:#fff;box-shadow:0 2px 6px rgba(59,130,246,.3)}
.btn-primary:hover{background:var(--accent-hover);box-shadow:0 4px 12px rgba(59,130,246,.4)}
.btn-outline{background:transparent;border:1px solid var(--border);color:var(--text-secondary)}
.btn-outline:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-light)}
.btn-group{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.85rem}

/* ===== Toggle / Mode Switch ===== */
.mode-switch{
  display:inline-flex;
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--radius-lg);overflow:hidden;
  padding:3px;margin-bottom:1rem;
  box-shadow:var(--shadow-sm);
}
.mode-switch button{
  padding:.4rem 1.1rem;font-size:.8125rem;font-weight:500;
  border:none;background:transparent;color:var(--text-muted);cursor:pointer;
  transition:all .2s;border-radius:calc(var(--radius-lg) - 3px);
  font-family:var(--font);
}
.mode-switch button.active{
  background:var(--navy);color:#fff;
  box-shadow:0 1px 4px rgba(0,0,0,.15);
}

/* ===== Advanced Options ===== */
.advanced-toggle{
  font-size:.8125rem;color:var(--text-muted);cursor:pointer;
  display:flex;align-items:center;gap:.35rem;margin-bottom:.75rem;
  background:none;border:none;font-family:var(--font);
  transition:color .15s;
}
.advanced-toggle:hover{color:var(--text-secondary)}
.advanced-toggle .arrow{transition:transform .2s;display:inline-block}
.advanced-toggle.open .arrow{transform:rotate(90deg)}
.advanced-body{display:none}
.advanced-body.open{display:block}

/* ===== Result Card ===== */
.result-card{
  border-color:var(--accent);
  background:linear-gradient(135deg,var(--surface) 0%,#f0f6ff 100%);
  animation:slideUp .25s ease-out;
  border-left:4px solid var(--accent);
}
.result-card.hidden{display:none}
@keyframes slideUp{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
.result-label{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted)}
.result-primary{font-size:2rem;font-weight:800;color:var(--navy);margin:.2rem 0;letter-spacing:-.02em}
.result-primary.success{color:var(--success)}
.result-primary.danger{color:var(--danger)}
.result-details{display:flex;flex-wrap:wrap;gap:.6rem;margin-top:.9rem}
.result-detail{
  background:rgba(255,255,255,.8);border:1px solid var(--border);
  border-radius:var(--radius);padding:.45rem .75rem;font-size:.8125rem;
}
.result-detail .detail-label{color:var(--text-muted);font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.04em}
.result-detail .detail-value{font-weight:700;font-family:var(--mono);color:var(--navy);margin-top:.1rem}

/* ===== Steps ===== */
.steps-toggle{
  font-size:.8125rem;color:var(--accent);cursor:pointer;
  background:none;border:none;font-family:var(--font);font-weight:600;
  margin-top:.75rem;display:flex;align-items:center;gap:.25rem;
}
.steps-body{
  display:none;margin-top:.75rem;padding:.85rem;
  background:var(--surface-2);border:1px solid var(--border);
  border-radius:var(--radius);font-size:.8125rem;line-height:1.7;
  color:var(--text-secondary);
}
.steps-body.open{display:block}
.steps-body .formula{
  font-family:var(--mono);font-size:.78rem;
  background:var(--navy);color:#e2e8f0;
  padding:.4rem .75rem;border-radius:6px;display:inline-block;margin:.3rem 0;
}

/* ===== Warnings ===== */
.warnings{margin-top:.75rem}
.warning-msg{
  display:flex;align-items:flex-start;gap:.5rem;
  padding:.5rem .75rem;border-radius:var(--radius);
  font-size:.8125rem;margin-bottom:.35rem;border:1px solid transparent;
}
.warning-msg.warn{background:var(--warning-light);color:#92400e;border-color:#fde68a}
.warning-msg.error{background:var(--danger-light);color:#991b1b;border-color:#fecaca}
.warning-msg.info{background:var(--accent-light);color:#1e40af;border-color:var(--accent-mid)}

/* ===== Cash Flow Table ===== */
.cf-table{width:100%;border-collapse:collapse;font-size:.875rem;margin-bottom:.75rem}
.cf-table th{
  text-align:left;font-size:.7rem;font-weight:700;color:var(--text-muted);
  text-transform:uppercase;letter-spacing:.05em;
  padding:.4rem .6rem;border-bottom:2px solid var(--border);background:var(--surface-2);
}
.cf-table td{padding:.35rem .5rem;border-bottom:1px solid var(--border)}
.cf-table input{
  width:100%;padding:.4rem .5rem;border:1px solid var(--border);
  border-radius:4px;font-size:.875rem;font-family:var(--mono);background:var(--surface);
}
.cf-table input:focus{outline:none;border-color:var(--accent)}
.cf-table .remove-btn{
  background:none;border:none;color:var(--text-muted);cursor:pointer;
  font-size:1rem;padding:.25rem;border-radius:4px;
}
.cf-table .remove-btn:hover{color:var(--danger);background:var(--danger-light)}

/* ===== Notes ===== */
.notes-card{background:var(--accent-light);border-color:var(--accent-mid)}
.notes-card p{font-size:.8125rem;color:#1e40af;line-height:1.65}

/* ===== HP Key Hint ===== */
.hp-hint{
  display:inline-flex;align-items:center;gap:.35rem;
  font-size:.75rem;color:var(--text-muted);
  background:var(--surface-2);border:1px solid var(--border);
  border-radius:var(--radius);padding:.4rem .75rem;margin-bottom:.75rem;
}
.hp-hint .key{
  font-family:var(--mono);font-size:.7rem;font-weight:700;
  background:var(--navy);color:#fff;
  padding:.1rem .35rem;border-radius:3px;
  box-shadow:0 2px 0 #0f172a;
}
.hp-hint .key.orange{background:#c2410c}

/* ===== Footer ===== */
.site-footer{
  text-align:center;padding:2.5rem 1rem;font-size:.78rem;color:var(--text-muted);
  border-top:1px solid var(--border);margin-top:3rem;
}
.site-footer a{color:var(--text-muted)}

/* ===== Copy Feedback ===== */
.copy-feedback{
  position:fixed;bottom:1.5rem;right:1.5rem;z-index:200;
  background:var(--navy);color:#fff;padding:.6rem 1rem;
  border-radius:var(--radius);font-size:.8125rem;font-weight:500;
  opacity:0;transform:translateY(8px);transition:all .2s;pointer-events:none;
  box-shadow:var(--shadow-xl);
}
.copy-feedback.show{opacity:1;transform:translateY(0)}

/* ===== Responsive ===== */
@media(max-width:640px){
  .site-header{padding:.65rem 1rem}
  .site-header .logo .course-badge{display:none}
  .container{padding:1.25rem 1rem}
  .dashboard-hero{padding:1.5rem 1.25rem}
  .hero-title{font-size:1.3rem}
  .tool-topbar h1{font-size:1.15rem}
  .result-primary{font-size:1.6rem}
  .input-grid{grid-template-columns:1fr}
}
